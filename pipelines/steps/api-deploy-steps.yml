#Note: the 'AZURE_SP' secret is required to be added into GitHub Secrets. See this blog post for details: https://samlearnsazure.blog/2019/12/13/github-actions/
env:
  subscriptionId: 00000000-0000-0000-0000-000000000000
  subscriptionName: COMPANY-PRODUCT-001
  artifactsPath: .
  archiveFile: '*.zip'
  apiName: web-PRODUCT-ENVIRONMENT-001
jobs:
  build:
    steps:
    - uses: actions/checkout@v2
    - # "Note: the 'AZURE_SP' secret is required to be added into GitHub Secrets. See this blog post for details: https://samlearnsazure.blog/2019/12/13/github-actions/"
      name: Azure Login
      uses: azure/login@v1
      with:
        creds: ${{ secrets.AZURE_SP }}
    - uses: actions/download-artifact@v2
      with:
        name: drop
        path: ${{ env. parameters.artifactsPath  }}
    - name: deploy ${{ env. parameters.apiName  }}
      uses: Azure/webapps-deploy@v2
      with:
        app-name: ${{ env. parameters.apiName  }}
        package: ${{ env. parameters.artifactsPath  }}/**/${{ env. parameters.archiveFile  }}
                    